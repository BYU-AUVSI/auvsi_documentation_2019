\documentclass[]{auvsi_doc}
\setkeys{auvsi_doc.cls}{
	AUVSITitle={Autopilot Subsystem Summary},
	AUVSILogoPath={./../logo.pdf}
}

\usepackage{hyperref}
\hypersetup{
	colorlinks=true,
	linkcolor=blue,
	filecolor=magenta,
	urlcolor=cyan,
}

\usepackage{longtable}

\urlstyle{same}

\begin{document}

\begin{AUVSITitlePage}
\begin{artifacttable}
\entry{CT-004, 0.1, 02-27-2019, Initial conception, John Akagi, Brady Moon}
\entry{CT-004, 0.2, 02-27-2019, Section on path planning, Brady Moon, John Akagi}
\entry{CT-004, 1.0, 04-05-2019, Added hardware testing, John Akagi, }
% additional \entry{} commands for extra rows in the revision table, if needed
\end{artifacttable}
\end{AUVSITitlePage}

% document contents (see below for LaTex commands that make your life easier)

\section{Introduction}
This document summarizes the performance of the autopilot when tested in simulation and hardware. Full test procedures and results are included later in the design review packet.

\section{Autopilot Tuning}

The underlying control algorithms being used involve a combination of PID, PI, and PD algorithms. Each of these require gains to be set so that the system is stable but also able to respond quickly to changes in the commanded attitude of the airplane. Additional gains are also needed to control the behavior of the airplane as it attempts to follow a defined path.


The gains were initially based on the gains from last year's plane and then tuned through in-flight testing. For tuning the longitudinal autopilot, the plane was initially commanded to fly straight. Varying altitudes and airspeeds were then commanded, and the longitudinal gains were adjusted so the transitions were smooth and controlled. The lateral gains were tuned by commanding the airplane to hold varying roll attitudes and making the transition smooth. Finally, the path follower gains were tuned by changing the desired course heading and adjusting the gains for smooth transitions.

\section{Autopilot Testing}

For testing the autopilot, sensor information was gathered using GPS and an inertial measurement unit. A heading and altitude were commanded and the airplane response was recorded. Overall, the airplane was able to stay within an acceptable bound of the commanded attitude. Previous tests had shown a poor altitude estimation due to only using GPS data. However, we were able to integrate a barometer which improves the accuracy of our altitude to within a meter.

\section{Path Planning Testing}

We tested the path planning algorithms for robustness and efficacy. This was done in simulation with 5 different random maps. Each map had 5 waypoints and 10 obstacles which were placed randomly. A path was planned to hit all waypoints and then a simulated plane, based on our actual design, attempted to fly the path. The closest approach to each waypoint and obstacle were calculated. After running all the simulations, we evaluated the success of the mission based on our key success measures. There were some mistakes in the simulations, but overall the results fall in the excellent category as defined by the key success measures.

The path planner and autopilot was also tested on hardware. Three points were chosen that were safe to fly through and the airplane was able to successfully plan and fly a path that reached all three waypoints. The airplane had difficulty following the exact path although further testing is needed to determine if this is due to wind or poor autopilot tuning. 

\section{Conclusion}

We have been able to test and verify the autopilot gains and the path planning algorithm in both simulation and hardware. Although results meet the key requirements, further development can be used to improve the efficiency of the path planner and autopilot.




\end{document}
